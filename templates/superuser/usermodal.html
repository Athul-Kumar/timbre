{% extends 'superuser/adminbase.html' %}

{% block usersclass %} 
text-light
{% endblock %}

{% block tablecontent %}
userlist
{% endblock %}


{% block maincontent %}
<table class="table">
    <thead>
      <tr>
        <th scope="col" class="text-light">First name</th>
        <th scope="col" class="text-light">Last name</th>
        <th scope="col" class="text-light">Email</th>
        <th scope="col" class="text-light">Mobile</th>
        <th scope="col" class="text-light">Block</th>
        <th scope="col" class="text-light">Unblock</th>
      </tr>
    </thead>
    <tbody>
        {% for user in users %}
      <tr>
        <th scope="row" class="text-light">{{user.first_name}}</th>
        <td class="text-light">{{user.last_name}}</td>
        <td class="text-light">{{user.email}}</td>
        <td class="text-light">{{user.mobile}}</td>
        <td>
            
            {% if user.is_active %}
                <td><button class="btn btn-danger"  data-toggle="modal" data-target="#block" >Block</button></td>
            {%else%}
                <td><button class="btn btn-primary"  data-toggle="modal" data-target="#unblock" >Un Block</button></td>
            {%endif%}
        </td>
                <div class="modal fade" id="block" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="block">Modal title</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          Do you want to block  "{{user.first_name}}"
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          <form action="{% url 'user_block' id=user.id  flag=1 %}" method="POST">
                          {% csrf_token %}
                          <button type="submit" class="btn btn-primary">Block</button>
                        </div>
                      </form>
                      </div>
                    </div>
                </div>
                  <div class="modal fade" id="unblock" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="unblock">Modal title</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          Do you want to Unblock  "{{user.first_name}}"
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          <form action="{% url 'user_block' id=user.id  flag=0 %}" method="POST">
                          {% csrf_token %}
                          <button type="submit" class="btn btn-primary">Un Block</button>
                        </div>
                      </form>
                      </div>
                    </div>
                </div>

              </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

{% endblock %}